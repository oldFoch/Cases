/* ===== базовая раскладка ===== */
.coinflip-wrap { padding: 0 16px; color: #f6d645; }
.cf-panel      { background: #141414; border: 1px solid #2b2b2b; border-radius: 12px; padding: 16px; }
.coinflip-stage{ display: grid; place-items: center; margin: 0 auto 14px; }

.cf-controls   { display: flex; flex-wrap: wrap; gap: 8px; justify-content: center; margin-top: 10px; }
.cf-input      { background:#1a1a1a; border:1px solid #2b2b2b; color:#fff; border-radius:10px; padding:10px 12px; min-width:140px; }
.cf-select     { background:#1a1a1a; border:1px solid #2b2b2b; color:#fff; border-radius:10px; padding:10px 12px; min-width:160px; }
.cf-btn        { padding:10px 14px; border-radius:12px; border:0; font-weight:800; cursor:pointer; }
.cf-btn.primary{ background:#ffd000; color:#111; }

/* Результат в строку */
.cf-result-line{
  display:flex;
  gap:12px;
  justify-content:center;
  align-items:center;
  margin-top:12px;
  font-weight:700;
}
.cf-result-line .amt.plus  { color:#32cd32; }  /* зелёный + */
.cf-result-line .amt.minus { color:#ff3b30; }  /* красный - */

/* ===== монета ===== */
.coin{
  --coin-size: 240px;     /* переопределяется из JSX */
  --flip-dur: 1200ms;     /* переопределяется из JSX */

  width: var(--coin-size);
  height: var(--coin-size);
  position: relative;
  transform-style: preserve-3d;
  transform: rotateY(0deg);        /* ВАЖНО: без анимации при загрузке */
  will-change: transform;
}

/* Стороны монеты */
.coin .side{
  position: absolute;
  inset: 0;
  border-radius: 50%;
  display: grid;
  place-items: center;
  font-weight: 900;
  font-size: calc(var(--coin-size) * 0.32);
  user-select: none;
  backface-visibility: hidden;
  -webkit-backface-visibility: hidden;
  box-shadow: 0 0 40px rgba(0,0,0,0.3) inset, 0 10px 22px rgba(0,0,0,0.35);
}

/* Лицевая: CT */
.coin .side.heads{
  background: radial-gradient(circle at 35% 35%, rgba(255,208,0,0.15), rgba(0,0,0,0.1) 60%), #1a1a1a;
  border: 1px solid #2b2b2b;
  color: #ffd000;
  transform: rotateY(0deg);
}

/* Обратная: T */
.coin .side.tails{
  background: radial-gradient(circle at 65% 65%, rgba(42,168,255,0.15), rgba(0,0,0,0.1) 60%), #1a1a1a;
  border: 1px solid #2b2b2b;
  color: #2aa8ff;
  transform: rotateY(180deg);
}

/* ===== анимации — ТОЛЬКО при .flipping ===== */
@keyframes flipToHeads {
  0%   { transform: rotateY(0deg);    }
  100% { transform: rotateY(2160deg); } /* 6 оборотов */
}
@keyframes flipToTails {
  0%   { transform: rotateY(0deg);     }
  100% { transform: rotateY(2340deg); } /* 6.5 оборота => 180deg */
}

.coin.flipping.heads{
  animation: flipToHeads var(--flip-dur) cubic-bezier(0.3, 0.9, 0.2, 1) forwards;
}
.coin.flipping.tails{
  animation: flipToTails var(--flip-dur) cubic-bezier(0.3, 0.9, 0.2, 1) forwards;
}
/* === Coinflip: не откатываться после завершения анимации === */
.coin {
  /* ВАЖНО: не трогаем animation-name/duration/etc., только закрепляем финальный кадр */
  animation-fill-mode: forwards !important;
  transform-style: preserve-3d;
  will-change: transform;
}

/* Обычно в 3D-поворотах нужны эти штуки, чтобы стороны не просвечивали */
.coin .side {
  backface-visibility: hidden;
}

/* Если у тебя были специальные классы на время кручения — тоже оставляем финальное состояние */
.coin.flipping,
.coin.flipping.heads,
.coin.flipping.tails {
  animation-fill-mode: forwards !important;
}
/* === Монета остаётся в финальном положении === */
.coin {
  animation-fill-mode: forwards !important; /* не откатываться */
  transform-style: preserve-3d;
  will-change: transform;
}

/* Стороны не просвечивают на поворотах */
.coin .side { backface-visibility: hidden; }

/* Фиксатор стороны после завершения анимации:
   добавляется классом из JSX, визуал не меняет */
.coin.stay-heads { transform: rotateY(0deg) !important; }
.coin.stay-tails { transform: rotateY(180deg) !important; }
